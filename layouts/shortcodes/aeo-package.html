{{- $allFeatures := slice 
    "AI content optimization"
    "Conversational AI setup" 
    "Multi-platform AI optimization"
    "Voice search optimization"
    "AI mention tracking"
    "Knowledge graph building"
    "Real-time AI monitoring"
    "Dedicated AEO manager"
    "Custom AI strategies"
    "Enterprise AI integration"
    "Competitive AI analysis"
    "Advanced analytics dashboard"
    "AI agent optimization"
    "Future AI preparation"
    "Semantic markup enhancement"
    "Entity relationship mapping"
    "AI response quality optimization"
    "Cross-platform consistency"
    "AI citation building"
    "Conversational flow optimization"
    "Voice commerce optimization"
    "AI personality development"
    "Smart speaker integration"
    "AI hallucination prevention"
    "Multimodal AI preparation"
    "AI ethics compliance"
    "Natural language processing"
    "Intent pattern analysis"
    "AI behavior modeling"
    "Predictive AI optimization"
-}}

{{- $packageFeatures := split (.Get "features") "|" -}}
{{- $featuresMap := dict -}}
{{- range $packageFeatures -}}
    {{- $feature := trim . " " -}}
    {{- $featuresMap = merge $featuresMap (dict $feature true) -}}
{{- end -}}

<div class="bg-white rounded-xl shadow-lg p-8 relative {{ if .Get "featured" }}ring-2 ring-purple-500{{ end }} h-full flex flex-col">
    {{ if .Get "featured" }}
    <div class="absolute -top-3 left-1/2 transform -translate-x-1/2">
        <span class="bg-purple-600 text-white px-4 py-1 rounded-full text-sm font-medium">
            Phổ biến nhất
        </span>
    </div>
    {{ end }}
    
    <div class="text-center mb-6">
        <h3 class="text-2xl font-bold text-gray-900 mb-2">{{ .Get "name" }}</h3>
        <div class="text-4xl font-bold text-purple-600 mb-2">
            {{ .Get "price" }}
            {{ if .Get "period" }}
            <span class="text-lg text-gray-500 font-normal">/{{ .Get "period" }}</span>
            {{ end }}
        </div>
        {{ if .Get "description" }}
        <p class="text-gray-600">{{ .Get "description" }}</p>
        {{ end }}
        
        {{ if .Get "badge" }}
        <div class="mt-3">
            <span class="inline-block px-3 py-1 bg-gradient-to-r from-purple-100 to-blue-100 text-purple-800 rounded-full text-sm font-semibold">
                {{ .Get "badge" }}
            </span>
        </div>
        {{ end }}
    </div>
    
    <div class="flex-grow mb-8">
        <ul class="space-y-3">
            {{ range $allFeatures }}
            {{- $hasFeature := index $featuresMap . -}}
            <li class="flex items-center text-gray-600">
                {{ if $hasFeature }}
                <svg class="w-5 h-5 text-purple-500 mr-3 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                </svg>
                <span class="text-gray-900">{{ . }}</span>
                {{ else }}
                <svg class="w-5 h-5 text-red-400 mr-3 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="6 18L18 6M6 6l12 12"></path>
                </svg>
                <span class="text-gray-400 line-through">{{ . }}</span>
                {{ end }}
            </li>
            {{ end }}
        </ul>
    </div>
    
    <div class="text-center mt-auto">
        <a href="{{ .Get "link" | default "#lien-he" }}" 
           class="w-full bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 text-white font-bold py-3 px-6 rounded-lg transition-all duration-200 inline-block transform hover:scale-105">
            {{ .Get "cta" | default "Liên hệ Thurnix" }}
        </a>
        
        {{ if .Get "popular" }}
        <p class="text-xs text-purple-600 mt-2 font-medium">⭐ Được chọn nhiều nhất</p>
        {{ end }}
    </div>
</div>